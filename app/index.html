<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Curriculum Inspector</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://unpkg.com/cytoscape@3.30.4/dist/cytoscape.min.js"></script>
  </head>
  <body>
    <div class="bg-orb orb-1" aria-hidden="true"></div>
    <div class="bg-orb orb-2" aria-hidden="true"></div>

    <div class="app-shell">
      <header class="topbar panel">
        <div>
          <p class="eyebrow">Learning Compiler</p>
          <h1>Curriculum Inspector</h1>
          <p class="subtitle">
            Inspect concept DAG quality and mastery coverage for
            <code>prompts/curriculum_generator.md</code> outputs.
          </p>
        </div>
      </header>

      <div class="workspace">
        <aside class="panel controls">
          <h2>Data Source</h2>
          <p class="help-text">
            Starts with the latest run output in
            <code>runs/&lt;run_id&gt;/outputs/curriculum/curriculum.json</code>. Use a local JSON file to switch.
          </p>
          <label class="file-input-label" for="fileInput">Load curriculum</label>
          <input id="fileInput" type="file" accept="application/json" />

          <h2>Filters</h2>
          <label for="searchInput">Search</label>
          <input id="searchInput" type="search" placeholder="Find by id, title, or concept text" />

          <div class="filter-block">
            <h3>Layer</h3>
            <div id="layerFilters" class="chip-grid"></div>
          </div>
        </aside>

        <main class="panel main-content">
          <div id="statusBanner" class="status-banner" role="status"></div>

          <section>
            <h2>Overview</h2>
            <div id="metricCards" class="metric-grid"></div>
          </section>

          <section>
            <div class="section-header">
              <h2>Dependency Graph</h2>
              <button id="graphFitBtn" type="button" class="graph-action">Fit graph</button>
            </div>
            <p class="muted graph-help">
              Pan and zoom directly in the graph. Click a node to inspect details.
            </p>
            <div id="graphView" class="graph-view" aria-label="Curriculum dependency graph"></div>
          </section>

          <section>
            <div class="section-header">
              <h2>Layer Explorer</h2>
              <p id="visibleCount" class="muted"></p>
            </div>
            <div id="layerExplorer" class="layer-explorer"></div>
          </section>

          <section>
            <h2>Node Inventory</h2>
            <div id="nodeTable"></div>
          </section>

          <section>
            <h2>Learning Path</h2>
            <div id="learningPath" class="path-list"></div>
          </section>

          <section>
            <h2>Milestones</h2>
            <div id="milestones" class="milestone-grid"></div>
          </section>

          <section>
            <h2>Open Questions</h2>
            <div id="openQuestions" class="coverage-grid"></div>
          </section>
        </main>

        <aside class="panel details">
          <h2>Node Details</h2>
          <div id="nodeDetails" class="details-body"></div>
        </aside>
      </div>
    </div>

    <script type="module" src="./main.js"></script>
  </body>
</html>
